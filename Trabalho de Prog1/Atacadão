#include <stdio.h>
#include <stdlib.h>

char lojas[10][20];
char nm_produto[15][20];
float precos[10][15];
int quantia[10][15];
int estoque[10];
int produtos[15];
int precosxquantia[10][15];
int qtd_maior_estoque;
int qtd_menor_estoque;

void le_loja();
void le_produto();
void le_preco();
void le_quantia();
void questao_a(); // unidades em cada loja
void questao_b(); // unidades de cada produto
void questao_c(); // pre�o do protudo com mais unidades
void questao_d(); // pre�o do protudo com menos unidades
void questao_e(); // custo de cada loja


int main(){

	printf("           ATACADAO\n\n");
	le_produto();
	le_loja();
	le_preco();
	le_quantia();
	questao_a();
	questao_b();
	questao_c();
	questao_d();
	questao_e();

	system("pause");
	return 0;

}

void le_loja(){
	printf("     Nome das 10 lojas \n   (20 caracteres no maximo)\n");
	int l,c;
	for(l=0;l<10;l++){
		fgets(lojas[l], 20, stdin);
	}
	for(l=0;l<10;l++){
		for(c=0;c<20;c++){
			if(lojas[l][c]=='\n'){
				lojas[l][c]='\0';
			}
		}
	}
	printf("\n");
}

void le_produto(){
	printf("     Nome dos 15 produtos \n   (20 caracteres no maximo)\n");
	int l,c;
	for(l=0;l<15;l++){
		fgets(nm_produto[l], 20, stdin);
	}
	for(l=0;l<15;l++){
		for(c=0;c<20;c++){
			if(nm_produto[l][c]=='\n'){
				nm_produto[l][c]='\0';
			}
		}
	}
	printf("\n");
}

void le_preco(){
	int l, c;
	printf("     Preco dos produtos:\n");
	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
			scanf("%f", &precos[l][c]);
		}
	}
	printf("\n");
}

void le_quantia(){
	int l, c;
	printf("     Quantia em estoque:\n");
	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
			scanf("%d", &quantia[l][c]);
		}
	}
	printf("\n");
}

void questao_a(){
	printf("     ESTOQUES     \n");
	int l, c, qtd=0;
	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
			qtd += quantia[l][c];
		}
		estoque[l] = qtd ;
		qtd = 0;
	}
	for(l=0;l<10;l++){
		printf("%s: %d unidades;\n", lojas[l], estoque[l]);
	}
	printf("\n");
}

void questao_b(){
	printf("     UNIDADES DE CADA PRODUTO\n");
	int l, c, qtd=0;
	for(c=0;c<15;c++){
		for(l=0;l<10;l++){
			qtd += quantia[l][c];
		}
		printf("%s: %d unidades;\n", nm_produto[c], qtd);
		qtd = 0;
	}
	printf("\n");
}

void questao_c(){

	printf("     Maior estoque\n");
	int l_maior_estoque, c_maior_estoque;
	int l, c, maior=0, cont=0;
	float preco;

	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
			if(quantia[l][c]>maior){
				l_maior_estoque = l;
				c_maior_estoque = c;
				maior = quantia[l][c];
			}
		}
	}

	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
			if(quantia[l][c]==maior){
				cont++;
			}
		}
	}

	qtd_maior_estoque = maior;
	preco = precos[l_maior_estoque][c_maior_estoque];

	if(cont>1){
		printf("%d estoques possuem a mesma quantia de produtos, %d unidades!\n", cont, maior);
		for(l=0;l<10;l++){
			for(c=0;c<15;c++){
				if(quantia[l][c]==maior){
					printf("%s - Produto: %s; Preco: %.2f;\n", lojas[l], nm_produto[c], precos[l][c]);
				}
		}
	}
	} else {
		printf("%s - Produto: %s; Unidades: %d; Preco: %.2f;\n",
			lojas[l_maior_estoque], nm_produto[c_maior_estoque], maior, preco);
	}
	printf("\n");
}

void questao_d(){

	printf("     MENOR ESTOQUE\n");
	int l, c, cont = 0, qtd = 0;
	int maior = 0, menor = 0;
	int l_menor_estoque, c_menor_estoque;

	menor = estoque[0];

	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
            if(estoque[l] < menor){
                l_menor_estoque = l;
				c_menor_estoque = c;
                menor = estoque[l];
            }
        }
	}
	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
            if(quantia[l][c] == menor){
                cont++;
            }
        }
	}
    qtd_menor_estoque = menor;

    if(cont>1){
        printf("%d estoques possuem a mesma quantia de produtos, %d unidades!\n", cont, menor);
            for(l=0;l<10;l++){
                for(c=0;c<15;c++){
                    if(quantia[l][c]==menor){
					printf("%s - %d Unidades;\n", lojas[l], menor);
                    }
                }
            }
    }else{
        printf("%s - %d Unidades;\n",lojas[l_menor_estoque], menor);
    }
	printf("\n");
}

void questao_e(){
	printf("     CUSTO DAS LOJAS");
	int l, c;
	float custo=0;
	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
			precosxquantia[l][c] = precos[l][c] * quantia[l][c];
		}
	}
	for(l=0;l<10;l++){
		for(c=0;c<15;c++){
			custo += precosxquantia[l][c];
		}
		printf("\n%s: R$ %.2f de custo;", lojas[l], custo);
		custo = 0;
	}
	printf("\n");
	printf("\n");
}
